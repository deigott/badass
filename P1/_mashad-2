# Use the latest official FRRouting image as the base image
FROM frrouting/frr:latest

# Update the package repository and install BusyBox
RUN apk update && apk add busybox

# Configure FRRouting to enable specific daemons (bgpd, ospfd, isisd)
RUN sed -i -e 's/bgpd=no/bgpd=yes/g' -e 's/ospfd=no/ospfd=yes/g' -e 's/isisd=no/isisd=yes/g' /etc/frr/daemons

# Remove the staticd daemon from the default FRRouting startup
RUN sed -i '/^staticd/s/^/#/' /etc/frr/daemons

# Specify the command to run when the container starts
CMD ["/usr/lib/frr/frrinit.sh"]
